package com.dogdaycare.service; import org.springframework.beans.factory.annotation.Value; import org.springframework.stereotype.Service; import org.springframework.web.multipart.MultipartFile; import java.io.IOException; import java.nio.file.Files; import java.nio.file.Path; import java.nio.file.Paths; @Service public class FileStorageService { @Value("${file.upload-dir}") private String uploadDir; public void storeFile(MultipartFile file, String clientIdentifier) { try { Path directory = Paths.get(uploadDir, clientIdentifier); if (!Files.exists(directory)) { Files.createDirectories(directory); } Path filePath = directory.resolve(file.getOriginalFilename()); Files.copy(file.getInputStream(), filePath); } catch (IOException e) { throw new RuntimeException("Failed to store file: " + file.getOriginalFilename(), e); } } }