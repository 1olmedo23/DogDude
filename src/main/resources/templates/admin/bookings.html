<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin · Bookings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/custom.css}">
</head>
<body class="bg-light page-admin-bookings">
<div th:replace="~{fragments/navbar :: navbar('admin-bookings')}"></div>

<div class="container py-4">

    <h1 class="mb-3">Bookings for <span th:text="${date}">2025-09-03</span></h1>

    <!-- Sticky (on phones) date picker -->
    <div class="admin-sticky-controls mb-3">
        <form class="row g-2 align-items-end" method="get" th:action="@{/admin/bookings/view}">
            <div class="col-auto">
                <input class="form-control" type="date" name="date" th:value="${date}">
            </div>
            <div class="col-auto">
                <button class="btn btn-primary">Go</button>
            </div>
        </form>
    </div>

    <div class="row g-4">
        <div class="col-md-6">
            <h5 class="mb-2 text-center">Daycare</h5>
            <ul class="list-group">
                <li th:each="b : ${bookingsDaycare}" class="list-group-item d-flex justify-content-between align-items-center flex-wrap gap-2">
                    <div class="flex-grow-1">
                        <strong th:text="${b.serviceType}"></strong> —
                        <span th:text="${b.time != null ? b.time : '—'}"></span>
                        &nbsp;|&nbsp;
                        <span th:text="${b.customer != null ? b.customer.username : 'N/A'}"></span>
                        &nbsp;(<span th:text="${b.status}"></span>)
                    </div>
                    <div th:if="${b.status == 'APPROVED'}" class="ms-md-3">
                        <form th:action="@{'/admin/bookings/cancel/' + ${b.id}}" method="post" class="d-inline">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                        </form>
                    </div>
                </li>
                <li th:if="${#lists.isEmpty(bookingsDaycare)}" class="list-group-item text-muted">No Daycare bookings.</li>
            </ul>
        </div>

        <div class="col-md-6">
            <h5 class="mb-2 text-center">Boarding</h5>
            <ul class="list-group">
                <li th:each="b : ${bookingsBoarding}" class="list-group-item d-flex justify-content-between align-items-center flex-wrap gap-2">
                    <div class="flex-grow-1">
                        <strong th:text="${b.serviceType}"></strong> —
                        <span th:text="${b.time != null ? b.time : '—'}"></span>
                        &nbsp;|&nbsp;
                        <span th:text="${b.customer != null ? b.customer.username : 'N/A'}"></span>
                        &nbsp;(<span th:text="${b.status}"></span>)
                    </div>
                    <div th:if="${b.status == 'APPROVED'}" class="ms-md-3">
                        <form th:action="@{'/admin/bookings/cancel/' + ${b.id}}" method="post" class="d-inline">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button class="btn btn-sm btn-outline-danger">Cancel</button>
                        </form>
                    </div>
                </li>
                <li th:if="${#lists.isEmpty(bookingsBoarding)}" class="list-group-item text-muted">No Boarding bookings.</li>
            </ul>
        </div>
    </div>
</div>

<!-- Keep aligned: Bootstrap bundle then your custom.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/custom.js}"></script>
</body>
</html>
